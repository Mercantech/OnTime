<!DOCTYPE html>
<html lang="da">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>OnTime – Dashboard</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <header class="app-header">
    <h1>OnTime</h1>
    <a id="admin-link" href="/admin" class="admin-link" hidden>Admin</a>
    <a id="class-dashboard-link" href="#" class="admin-link header-class-link" hidden>Se min klasse</a>
    <span id="user-name" class="user-info"></span>
    <button id="logout" class="btn-logout">Log ud</button>
  </header>
  <main class="app-main dashboard">
    <!-- Hero + Check-in CTA -->
    <section class="card dashboard-hero">
      <p id="hero-greeting" class="hero-greeting">Hej!</p>
      <div id="hero-status" class="hero-status">
        <span id="hero-message" class="hero-message">Indlæser…</span>
        <button id="checkin-btn" class="btn-checkin not-ready" disabled>Stempel ind</button>
      </div>
      <p id="checkin-status" class="checkin-success" hidden></p>
    </section>

    <!-- Location widget (WiFi/Geo) – skjult indtil klar -->
    <section id="location-card" class="card checkin-card" hidden>
      <h2>Stempel ind</h2>
      <div id="geo-intro" class="checkin-intro">Du skal være på skolen for at stemple ind.</div>
      <div id="wifi-intro" class="checkin-intro" hidden>Du skal være på netværket <strong>MAGS-OLC</strong> for at stemple ind. Forbind til WiFi-netværket MAGS-OLC og prøv igen.</div>
      <div class="location-widget">
        <div id="geo-widget">
          <div id="location-ring" class="location-ring waiting"><span class="distance-value">–</span><span> m</span></div>
          <p id="location-status" class="location-status">Venter på GPS…</p>
        </div>
        <div id="wifi-widget" class="wifi-widget" hidden>
          <p class="wifi-message">For at stemple ind skal du være forbundet til WiFi-netværket <strong id="wifi-name">MAGS-OLC</strong>.</p>
        </div>
      </div>
    </section>

    <!-- Stats korts -->
    <section class="dashboard-stats">
      <div class="card stat-card">
        <span class="stat-label">Mine point</span>
        <span id="stat-points" class="stat-value">–</span>
        <span id="stat-points-max" class="stat-sublabel">/ – pt</span>
      </div>
      <div class="card stat-card stat-card-streak" id="stat-card-streak">
        <span class="stat-label">Streak</span>
        <div class="streak-flame-wrap">
          <span class="streak-flame-icon" aria-hidden="true">
            <svg class="flame-svg" viewBox="0 0 32 42" fill="none" xmlns="http://www.w3.org/2000/svg">
              <defs>
                <linearGradient id="flameGrad" x1="16" y1="0" x2="16" y2="42" gradientUnits="userSpaceOnUse">
                  <stop offset="0%" stop-color="#86efac"/>
                  <stop offset="40%" stop-color="#4ade80"/>
                  <stop offset="75%" stop-color="#22c55e"/>
                  <stop offset="100%" stop-color="#15803d"/>
                </linearGradient>
                <linearGradient id="flameCore" x1="16" y1="4" x2="16" y2="36" gradientUnits="userSpaceOnUse">
                  <stop offset="0%" stop-color="#bbf7d0"/>
                  <stop offset="100%" stop-color="#4ade80"/>
                </linearGradient>
              </defs>
              <path class="flame-outer" d="M16 0 L22 12 L28 26 L22 38 Q16 42 10 38 L4 26 L10 12 Z" fill="url(#flameGrad)"/>
              <path class="flame-mid" d="M16 4 L20 14 L24 26 L20 34 Q16 38 12 34 L8 26 L12 14 Z" fill="url(#flameCore)" opacity="0.95"/>
              <path class="flame-inner" d="M16 10 L18 18 L20 26 L16 30 L12 26 L14 18 Z" fill="#dcfce7" opacity="0.9"/>
            </svg>
          </span>
          <span id="stat-streak" class="stat-value streak-value">0</span>
        </div>
        <span class="stat-sublabel">dage i træk</span>
      </div>
      <div class="card stat-card">
        <span class="stat-label">Klasse</span>
        <span id="stat-class-pct" class="stat-value">–</span>
        <span class="stat-sublabel">% af max</span>
      </div>
    </section>

    <!-- Burndown -->
    <section class="card dashboard-card">
      <h2>Din fremgang denne måned</h2>
      <p class="card-hint">Ideal (grøn sti) vs dine faktiske point (accent).</p>
      <div class="burndown-wrap">
        <canvas id="burndown-chart"></canvas>
      </div>
    </section>

    <!-- Kalender + Seneste -->
    <section class="dashboard-grid-2">
      <div class="card dashboard-card">
        <h2>Indstemplinger</h2>
        <div id="calendar-heatmap" class="calendar-heatmap">Indlæser…</div>
      </div>
      <div class="card dashboard-card">
        <h2>Seneste</h2>
        <ul id="recent-list" class="recent-list">Indlæser…</ul>
      </div>
    </section>

    <!-- Leaderboard -->
    <section class="card dashboard-card">
      <h2>Klassens leaderboard</h2>
      <p class="card-hint"><a id="link-class-dashboard" href="#" class="btn-class-dashboard">Se klassedashboard</a> (streak, dage med alle til tiden m.m.)</p>
      <div id="leaderboard-total" class="leaderboard-total"></div>
      <div id="leaderboard-podium" class="leaderboard-podium"></div>
      <div id="leaderboard">Indlæser…</div>
    </section>
  </main>
  <script src="js/app.js"></script>
</body>
</html>
