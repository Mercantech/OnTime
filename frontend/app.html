<!DOCTYPE html>
<html lang="da">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>OnTime ‚Äì Dashboard</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <header class="app-header">
    <h1>OnTime</h1>
    <a id="admin-link" href="/admin" class="admin-link" hidden>Admin</a>
    <a id="class-dashboard-link" href="#" class="admin-link header-class-link" hidden>Se min klasse</a>
    <a href="/spil" class="admin-link">Spil</a>
    <a href="/spotify" class="admin-link">Sang√∏nsker</a>
    <a href="https://edumercantec-my.sharepoint.com/:x:/g/personal/jekn_edu_mercantec_dk/IQBX8mxWSzlWSasK_yzr_SkLASt16MWWzyDc5oT8KDOzLeY?rtime=6iLN3xhx3kg" class="admin-link" target="_blank" rel="noopener noreferrer">Skema</a>
    <span id="user-name" class="user-info"></span>
    <button id="logout" class="btn-logout">Log ud</button>
  </header>
  <main class="app-main dashboard">
    <!-- Hero + Check-in CTA -->
    <section class="card dashboard-hero">
      <p id="hero-greeting" class="hero-greeting">Hej!</p>
      <div id="hero-status" class="hero-status">
        <span id="hero-message" class="hero-message">Indl√¶ser‚Ä¶</span>
        <button id="checkin-btn" class="btn-checkin not-ready" disabled>Stempel ind</button>
      </div>
      <blockquote id="daily-quote" class="daily-quote" hidden aria-hidden="true"></blockquote>
      <p id="checkin-status" class="checkin-success" hidden></p>
    </section>

    <!-- Location widget (WiFi/Geo) ‚Äì skjult indtil klar -->
    <section id="location-card" class="card checkin-card" hidden>
      <h2>Stempel ind</h2>
      <div id="geo-intro" class="checkin-intro">Du skal v√¶re p√• skolen for at stemple ind.</div>
      <div id="wifi-intro" class="checkin-intro" hidden>Du skal v√¶re p√• netv√¶rket <strong>MAGS-OLC</strong> for at stemple ind. Forbind til WiFi-netv√¶rket MAGS-OLC og pr√∏v igen.</div>
      <div class="location-widget">
        <div id="geo-widget">
          <div id="location-ring" class="location-ring waiting"><span class="distance-value">‚Äì</span><span> m</span></div>
          <p id="location-status" class="location-status">Venter p√• GPS‚Ä¶</p>
        </div>
        <div id="wifi-widget" class="wifi-widget" hidden>
          <p class="wifi-message">For at stemple ind skal du v√¶re forbundet til WiFi-netv√¶rket <strong id="wifi-name">MAGS-OLC</strong>.</p>
        </div>
      </div>
    </section>

    <!-- Stats korts -->
    <section class="dashboard-stats">
      <div class="card stat-card">
        <span class="stat-label">Mine point</span>
        <span id="stat-points" class="stat-value">‚Äì</span>
        <span id="stat-points-max" class="stat-sublabel">/ ‚Äì pt</span>
      </div>
      <div class="card stat-card stat-card-streak" id="stat-card-streak">
        <span class="stat-label">Streak</span>
        <div class="streak-flame-wrap">
          <span class="streak-flame-icon" aria-hidden="true">
            <svg class="flame-svg" viewBox="0 0 32 42" fill="none" xmlns="http://www.w3.org/2000/svg">
              <defs>
                <filter id="flameGlow" x="-45%" y="-45%" width="190%" height="190%" color-interpolation-filters="sRGB">
                  <feGaussianBlur in="SourceGraphic" stdDeviation="2.8" result="blur"/>
                  <feColorMatrix in="blur" type="matrix" values="0 0 0 0 0.13  0 0 0 0 0.77  0 0 0 0 0.37  0 0 0 0.55 0" result="glow"/>
                  <feMerge><feMergeNode in="glow"/></feMerge>
                </filter>
                <linearGradient id="flameGrad" x1="16" y1="0" x2="16" y2="42" gradientUnits="userSpaceOnUse">
                  <stop offset="0%" stop-color="#86efac"/>
                  <stop offset="40%" stop-color="#4ade80"/>
                  <stop offset="75%" stop-color="#22c55e"/>
                  <stop offset="100%" stop-color="#15803d"/>
                </linearGradient>
                <linearGradient id="flameCore" x1="16" y1="4" x2="16" y2="36" gradientUnits="userSpaceOnUse">
                  <stop offset="0%" stop-color="#bbf7d0"/>
                  <stop offset="100%" stop-color="#4ade80"/>
                </linearGradient>
              </defs>
              <path class="flame-glow-layer" d="M16 0 L22 12 L28 26 L22 38 Q16 42 10 38 L4 26 L10 12 Z" fill="#22c55e" filter="url(#flameGlow)"/>
              <path class="flame-outer" d="M16 0 L22 12 L28 26 L22 38 Q16 42 10 38 L4 26 L10 12 Z" fill="url(#flameGrad)"/>
              <path class="flame-mid" d="M16 4 L20 14 L24 26 L20 34 Q16 38 12 34 L8 26 L12 14 Z" fill="url(#flameCore)" opacity="0.95"/>
              <path class="flame-inner" d="M16 10 L18 18 L20 26 L16 30 L12 26 L14 18 Z" fill="#dcfce7" opacity="0.9"/>
            </svg>
          </span>
          <span id="stat-streak" class="stat-value streak-value">0</span>
        </div>
        <span class="stat-sublabel">dage i tr√¶k</span>
      </div>
      <div class="card stat-card">
        <span class="stat-label">Klasse</span>
        <span id="stat-class-pct" class="stat-value">‚Äì</span>
        <span class="stat-sublabel">% af max</span>
      </div>
    </section>

    <!-- Badges -->
    <section class="card dashboard-card">
      <h2>Dine badges</h2>
      <p class="card-hint">Saml pr√¶stationer ved at m√∏de op til tiden.</p>
      <div id="badges-row" class="badges-row">Indl√¶ser‚Ä¶</div>
    </section>

    <!-- Spil -->
    <section class="card dashboard-card games-preview">
      <h2>Spil</h2>
      <p class="card-hint">G√¶t dagens ord eller dagens flag ‚Äì optjen point og badges.</p>
      <div class="games-preview-grid">
        <a href="/spil/wordle" class="game-preview-card game-preview-wordle">
          <span class="game-preview-icon" aria-hidden="true">üü©</span>
          <span class="game-preview-name">Dagens Wordle</span>
          <span class="game-preview-desc">6 fors√∏g til ordet</span>
        </a>
        <a href="/spil/flag" class="game-preview-card game-preview-flag">
          <span class="game-preview-icon" aria-hidden="true">üè≥Ô∏è</span>
          <span class="game-preview-name">Dagens flag</span>
          <span class="game-preview-desc">G√¶t landet</span>
        </a>
        <a href="/spil/sudoku" class="game-preview-card game-preview-sudoku">
          <span class="game-preview-icon" aria-hidden="true">üî¢</span>
          <span class="game-preview-name">Dagens Sudoku</span>
          <span class="game-preview-desc">6√ó6 ‚Äì leaderboard p√• tid</span>
        </a>
      </div>
    </section>

    <!-- Point over tid (op og nedture) -->
    <section class="card dashboard-card">
      <h2>Mine point over tid</h2>
      <p class="card-hint">Kumulativ saldo denne m√•ned ‚Äì indstempling, spil og casino. Du ser op- og nedture.</p>
      <div class="points-history-wrap">
        <canvas id="points-history-chart"></canvas>
      </div>
    </section>

    <!-- Burndown -->
    <section class="card dashboard-card">
      <h2>Din fremgang denne m√•ned</h2>
      <p class="card-hint">Ideal (gr√∏n sti) vs dine faktiske point fra indstempling (accent).</p>
      <div class="burndown-wrap">
        <canvas id="burndown-chart"></canvas>
      </div>
    </section>

    <!-- Kalender + Seneste -->
    <section class="dashboard-grid-2">
      <div class="card dashboard-card">
        <h2>Indstemplinger</h2>
        <div id="calendar-heatmap" class="calendar-heatmap">Indl√¶ser‚Ä¶</div>
      </div>
      <div class="card dashboard-card">
        <h2>Seneste</h2>
        <ul id="recent-list" class="recent-list">Indl√¶ser‚Ä¶</ul>
      </div>
    </section>

    <!-- Leaderboard -->
    <section class="card dashboard-card">
      <h2>Klassens leaderboard</h2>
      <p class="card-hint"><a id="link-class-dashboard" href="#" class="btn-class-dashboard">Se klassedashboard</a> (streak, dage med alle til tiden m.m.)</p>
      <div id="leaderboard-total" class="leaderboard-total"></div>
      <div id="leaderboard-podium" class="leaderboard-podium"></div>
      <div id="leaderboard">Indl√¶ser‚Ä¶</div>
    </section>
  </main>
  <footer class="app-footer"><span id="app-version" class="app-version" aria-hidden="true"></span></footer>

  <!-- Bet-popup (modal i hj√∏rnet) ‚Äì vises kun n√•r der er et bet (som notification) -->
  <button type="button" id="bet-trigger" class="bet-trigger" aria-label="√Öbn bet" hidden>Bet</button>
  <div id="bet-modal-overlay" class="bet-modal-overlay" hidden aria-hidden="true"></div>
  <div id="bet-modal" class="bet-modal" role="dialog" aria-labelledby="bet-modal-title" aria-modal="true" hidden>
    <div class="bet-modal-header">
      <h2 id="bet-modal-title" class="bet-modal-title">Bet</h2>
      <button type="button" id="bet-modal-close" class="bet-modal-close" aria-label="Luk">√ó</button>
    </div>
    <div class="bet-modal-body">
      <p class="bet-modal-hint">S√¶t point p√• et udfald. Puljen fordeles blandt dem der rammer vinderen.</p>
      <div id="bets-list" class="bets-list">Indl√¶ser‚Ä¶</div>
    </div>
  </div>

  <script src="js/app.js"></script>
  <script src="/js/debug-issue.js"></script>
</body>
</html>
