<!DOCTYPE html>
<html lang="da">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>OnTime – Admin</title>
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>
  <header class="app-header">
    <h1>OnTime</h1>
    <a href="/app" class="admin-link">Tilbage til app</a>
    <span id="admin-user" class="user-info"></span>
    <button id="logout" class="btn-logout">Log ud</button>
  </header>
  <main class="app-main admin-main">
    <div class="admin-dashboard">
      <aside class="admin-sidebar">
        <div class="admin-sidebar-col">
          <section class="card">
            <h2>Tilladte netværk (WiFi-whitelist)</h2>
            <p class="card-hint">Elever skal være på <strong>MAGS-OLC</strong>. Format: <code>192.168.1.0/24</code> eller <code>185.22.75.2/32</code>.</p>
            <form id="form-ip-range">
              <input type="text" id="ip-range-input" placeholder="fx 192.168.1.0/24" required>
              <button type="submit">Tilføj adresse</button>
            </form>
            <p id="ip-range-message" class="message" hidden></p>
            <ul id="ip-range-list" class="ip-range-list">Indlæser…</ul>
          </section>
          <section class="card">
            <h2>Ny klasse</h2>
            <form id="form-class">
              <input type="text" id="class-name" placeholder="Klassenavn (fx 2b)" required>
              <button type="submit">Opret klasse</button>
            </form>
            <p id="class-message" class="message" hidden></p>
          </section>
        </div>
        <div class="admin-sidebar-col">
          <section class="card">
            <h2>Import elever fra CSV</h2>
            <p class="card-hint">Semicolon-separeret. Vælg klasse – CSV har ikke klasse.</p>
            <form id="form-csv">
              <label for="import-class">Klasse: <span id="import-class-status" class="class-status">Indlæser…</span></label>
              <select id="import-class" required disabled>
                <option value="">Indlæser klasser…</option>
              </select>
              <input type="file" id="csv-file" accept=".csv,text/csv" required>
              <button type="submit">Importer CSV</button>
            </form>
            <div id="import-result" class="import-result" hidden></div>
          </section>
          <section class="card">
            <h2>Giv point til elev</h2>
            <p class="card-hint">Sæt eller opdater point for en elev på en given dato (0–45 point).</p>
            <form id="form-give-points">
              <label for="give-points-user">Elev</label>
              <select id="give-points-user" required>
                <option value="">Vælg elev…</option>
              </select>
              <label for="give-points-date">Dato</label>
              <input type="date" id="give-points-date" required>
              <label for="give-points-points">Point (0–45)</label>
              <input type="number" id="give-points-points" min="0" max="45" value="45" required>
              <button type="submit">Giv point</button>
            </form>
            <p id="give-points-message" class="message" hidden></p>
          </section>
          <section class="card">
            <h2>Ny bruger</h2>
            <form id="form-user">
              <input type="text" id="user-name" placeholder="Navn" required>
              <input type="email" id="user-email" placeholder="Email" required>
              <input type="password" id="user-password" placeholder="Adgangskode (min. 4)" required minlength="4">
              <select id="user-class" required><option value="">Vælg klasse</option></select>
              <label class="checkbox-label"><input type="checkbox" id="user-is-admin" name="isAdmin"> Administrator</label>
              <button type="submit">Opret bruger</button>
            </form>
            <p id="user-message" class="message" hidden></p>
          </section>
        </div>
      </aside>
      <div class="admin-content">
        <section class="card card-users">
          <h2>Oversigt over alle brugere</h2>
          <p class="user-count">Antal: <strong id="user-count">0</strong> – Filter: <select id="filter-class"><option value="">Alle klasser</option></select></p>
          <div class="user-table-wrap">
            <table class="user-table" id="user-table">
              <thead>
                <tr><th>Navn</th><th>Email</th><th>Klasse</th><th></th><th>Handlinger</th></tr>
              </thead>
              <tbody id="user-list"></tbody>
            </table>
          </div>
        </section>
      </div>
    </div>
  </main>
  <script src="/js/admin.js"></script>
</body>
</html>
