<!DOCTYPE html>
<html lang="da">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>OnTime – Sangønsker</title>
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>
  <header class="app-header">
    <h1><a href="/app" class="header-home">OnTime</a></h1>
    <a href="/spil" class="admin-link">Spil</a>
    <a href="/spotify" class="admin-link">Sangønsker</a>
    <a href="/jokes" class="admin-link">Dagens joke</a>
    <a href="https://edumercantec-my.sharepoint.com/:x:/g/personal/jekn_edu_mercantec_dk/IQBX8mxWSzlWSasK_yzr_SkLASt16MWWzyDc5oT8KDOzLeY?rtime=6iLN3xhx3kg" class="admin-link" target="_blank" rel="noopener noreferrer">Skema</a>
    <span id="user-name" class="user-info"></span>
    <button id="logout" class="btn-logout">Log ud</button>
  </header>
  <main class="app-main sangønsker-page">
    <h2 class="sangønsker-title">Sangønsker</h2>
    <p class="sangønsker-intro">Foreslå en sang – de andre kan stemme den op. Sorteret efter flest stemmer.</p>

    <section class="card sangønsker-add">
      <h3>Tilføj ønske</h3>
      <div class="sangønsker-search-row">
        <input type="search" id="search-input" class="sangønsker-search-input" placeholder="Søg efter sang eller kunstner…" autocomplete="off">
        <button type="button" id="search-btn" class="btn-primary">Søg</button>
      </div>
      <div id="search-results" class="sangønsker-search-results" hidden aria-live="polite"></div>
    </section>

    <section class="card sangønsker-play-section" id="sangønsker-play-section">
      <h3>Afspil her</h3>
      <p class="sangønsker-play-intro">Afspil ønskelisten fra toppen i dette vindue. Sange slettes automatisk fra listen, når de er afspillet.</p>
      <div id="spotify-connect-area" class="sangønsker-connect-area">
        <button type="button" id="spotify-connect-btn" class="btn-spotify-connect">Forbind Spotify</button>
      </div>
      <div id="spotify-play-area" class="sangønsker-play-area" hidden>
        <button type="button" id="spotify-play-top-btn" class="btn-spotify-green">Afspil fra toppen</button>
        <p id="spotify-play-hint" class="sangønsker-play-hint">Sætter hele ønskelisten i kø og starter fra øverste sang. Kræver Spotify Premium.</p>
        <div id="spotify-player-ui" class="spotify-player-ui" hidden>
          <div class="spotify-now-playing-card">
            <div class="spotify-now-art"><img id="spotify-now-art-img" src="" alt="" width="120" height="120"></div>
            <div class="spotify-now-info">
              <p class="spotify-now-label">Spiller nu</p>
              <h4 id="spotify-now-title" class="spotify-now-title"></h4>
              <p id="spotify-now-artist" class="spotify-now-artist"></p>
              <div class="spotify-progress-wrap">
                <input type="range" id="spotify-progress" class="spotify-progress" min="0" max="1000" value="0" aria-label="Sangposition">
                <div class="spotify-time">
                  <span id="spotify-time-pos">0:00</span>
                  <span id="spotify-time-dur">0:00</span>
                </div>
              </div>
              <div class="spotify-controls">
                <button type="button" id="spotify-btn-prev" class="spotify-btn spotify-btn-prev" title="Forrige">‹</button>
                <button type="button" id="spotify-btn-play" class="spotify-btn spotify-btn-play" title="Play/Pause">▶</button>
                <button type="button" id="spotify-btn-next" class="spotify-btn spotify-btn-next" title="Næste">›</button>
              </div>
            </div>
          </div>
          <div class="spotify-queue-wrap">
            <h4 class="spotify-queue-title">Kø</h4>
            <ul id="spotify-queue-list" class="spotify-queue-list"></ul>
          </div>
        </div>
      </div>
      <div id="spotify-connect-footer" class="spotify-connect-footer" hidden>
        <span id="spotify-connected-label" class="sangønsker-connected-label">Spotify forbundet</span>
        <button type="button" id="spotify-disconnect-btn" class="btn-spotify-black">Fjern forbindelse</button>
      </div>
    </section>

    <section class="card sangønsker-list-wrap">
      <h3>Ønskeliste</h3>
      <div id="sangønsker-admin-bar" class="sangønsker-admin-bar" hidden>
        <label class="sangønsker-show-all-label"><input type="checkbox" id="sangønsker-show-all"> Vis alle klasser</label>
      </div>
      <div id="requests-list" class="sangønsker-list">Indlæser…</div>
    </section>
  </main>
  <script src="https://sdk.scdn.co/spotify-player.js"></script>
  <script src="/js/sangønsker.js"></script>
  <script src="/js/debug-issue.js"></script>
</body>
</html>
